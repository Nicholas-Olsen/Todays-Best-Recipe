import openai
import os

# ğŸ”¹ OpenAI API í‚¤ ì„¤ì • (í™˜ê²½ ë³€ìˆ˜ì—ì„œ ê°€ì ¸ì˜¤ê¸°)
api_key = os.getenv("OPENAI_API_KEY")

if api_key is None:
    raise ValueError("í™˜ê²½ ë³€ìˆ˜ì— 'OPENAI_API_KEY'ë¥¼ ì„¤ì •í•˜ì„¸ìš”.")

# ğŸ”¹ OpenAI í´ë¼ì´ì–¸íŠ¸ ìƒì„±
client = openai.Client(api_key=api_key)


def get_recipe(ingredients):
    """
    ì…ë ¥ëœ ì¬ë£Œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìš”ë¦¬ë¥¼ ì¶”ì²œí•˜ê³  í•´ë‹¹ ìš”ë¦¬ì˜ ì¢…ë¥˜ ë° ë ˆì‹œí”¼ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜
    """
    prompt = f"""
    ì‚¬ìš©ìê°€ ì…ë ¥í•œ ì¬ë£Œë¥¼ ë°”íƒ•ìœ¼ë¡œ ê°€ì¥ ì ì ˆí•œ ìš”ë¦¬ ì¢…ë¥˜(í•œì‹, ì¤‘ì‹, ì¼ì‹, ì–‘ì‹ ë“±)ë¥¼ ê²°ì •í•˜ê³ , ê·¸ì— ë§ëŠ” ìš”ë¦¬ë¥¼ ì¶”ì²œí•´ì¤˜.
    ê·¸ë¦¬ê³  ì¶”ì²œëœ ìš”ë¦¬ì˜ ë ˆì‹œí”¼ë¥¼ ë‹¨ê³„ë³„ë¡œ ì„¤ëª…í•´ì¤˜.

    ì…ë ¥ëœ ì¬ë£Œ: {ingredients}

    ì¶œë ¥ í˜•ì‹:
    - ìš”ë¦¬ ì¢…ë¥˜: [í•œì‹, ì¤‘ì‹, ì¼ì‹, ì–‘ì‹ ì¤‘ í•˜ë‚˜]
    - ì¶”ì²œ ìš”ë¦¬ ì´ë¦„: [ìš”ë¦¬ ì´ë¦„]
    - ë ˆì‹œí”¼:
      1. [ë‹¨ê³„ 1]
      2. [ë‹¨ê³„ 2]
      3. [ë‹¨ê³„ 3]
    """

    # ğŸ”¹ GPT API í˜¸ì¶œ
    response = client.chat.completions.create(
        model="gpt-4o mini",  # ë˜ëŠ” "gpt-3.5-turbo"
        messages=[{"role": "user", "content": prompt}]
    )

    # ğŸ”¹ ì‘ë‹µ ë°ì´í„°ì—ì„œ ë ˆì‹œí”¼ ë‚´ìš© ì¶”ì¶œ
    return response.choices[0].message.content


# ğŸ”¹ ì‚¬ìš©ì ì…ë ¥ (ì‰¼í‘œë¡œ êµ¬ë¶„í•˜ì—¬ ì¬ë£Œ ì…ë ¥)
ingredients = input("ì‚¬ìš©í•  ì¬ë£Œë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì‰¼í‘œë¡œ êµ¬ë¶„): ")

# ğŸ”¹ GPT API í˜¸ì¶œí•˜ì—¬ ìš”ë¦¬ ë° ë ˆì‹œí”¼ ë°›ê¸°
recipe = get_recipe(ingredients)

# ğŸ”¹ ê²°ê³¼ ì¶œë ¥
print("\nâœ¨ ì¶”ì²œ ìš”ë¦¬ ë° ë ˆì‹œí”¼ âœ¨")
print(recipe)